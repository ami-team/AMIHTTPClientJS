/*!
 * Copyright © 2021-2021 CNRS/LPSC
 *
 * Author: Jérôme ODIER (jerome.odier@lpsc.in2p3.fr)
 *
 * Repositories: https://gitlab.in2p3.fr/ami-team/AMIHTTPClientJS/
 *               https://www.github.com/ami-team/AMIHTTPClientJS/
 *
 * This software is a computer program whose purpose is to provide an
 * HTTP Client to the ATLAS Metadata Interface (AMI) ecosystem.
 *
 * This software is governed by the CeCILL-C license under French law and
 * abiding by the rules of distribution of free software. You can use,
 * modify and/or redistribute the software under the terms of the CeCILL-C
 * license as circulated by CEA, CNRS and INRIA at the following URL
 * "http://www.cecill.info".
 *
 * The fact that you are presently reading this means that you have had
 * knowledge of the CeCILL-C license and that you accept its terms.
 *
 */(()=>{var e={915:(e,r,t)=>{e.exports=t(583)},583:(e,r,t)=>{"use strict";var n;!function(){var o=1,u=2,a=3,i=4,s=5,f=6,p=7,c=8,l=9,h=10,v=11,y=function(){var e,r,t,n,y=1,g=2,d=3,w=4,b=5,x=6,m=7,j='Unexpected token "%0"',O="Unexpected end of path";function A(){for(var e,r=k();L("|");)Z(),(e||(e=[r])).push(k());return e?{type:c,args:e}:r}function k(){return L("(")?I():P()}function I(){F("(");var e=A();F(")");for(var r,t=[];r=$();)t.push(r);return t.length?e.type===o?(e.parts=e.parts.concat(t),e):(t.unshift(e),{type:o,parts:t}):e}function $(){return L("[")?function(){F("[");var e=function(){if(L(":"))return Z(),{type:h,toIdx:T()};var e=T();if(L(":"))return Z(),L("]")?{type:h,fromIdx:e}:{type:h,fromIdx:e,toIdx:T()};return{type:h,idx:e}}();return F("]"),{type:i,arg:e}}():L("{")?function(){F("{");var e=S();return F("}"),{type:a,arg:e}}():L("(")?I():void 0}function P(){z()||N(Z());var e,r=!1;L("^")?(Z(),r=!0):U()&&(e=Z().val.substr(1));for(var t,n=[];t=D()?function(){var e,r=Z().val,t=G();(L("*")||t.type===y||t.type===d)&&(e=Z().val);return{type:u,selector:r,prop:e}}():$();)n.push(t);return{type:o,fromRoot:r,subst:e,parts:n}}function S(){for(var e,r=C();L("||");)Z(),(e||(e=[r])).push(C());return e?{type:s,op:"||",args:e}:r}function C(){for(var e,r=M();L("&&");)Z(),(e||(e=[r])).push(M());return e?{type:s,op:"&&",args:e}:r}function M(){for(var e=E();L("==")||L("!=")||L("===")||L("!==")||L("^==")||L("==^")||L("^=")||L("=^")||L("$==")||L("==$")||L("$=")||L("=$")||L("*==")||L("==*")||L("*=")||L("=*");)e={type:f,op:Z().val,args:[e,M()]};return e}function E(){for(var e=function(){var e=W();for(;L("+")||L("-");)e={type:p,op:Z().val,args:[e,W()]};return e}();L("<")||L(">")||L("<=")||L(">=");)e={type:f,op:Z().val,args:[e,E()]};return e}function W(){for(var e=T();L("*")||L("/")||L("%");)e={type:p,op:Z().val,args:[e,W()]};return e}function T(){return L("!")||L("-")?{type:l,op:Z().val,arg:T()}:function(){var e=G().type;if(e===d||e===g||e===w||e===b)return{type:v,val:Z().val};if(z())return P();if(L("("))return function(){F("(");var e=S();return F(")"),e}();return N(Z())}()}function L(e){var r=G();return r.type===x&&r.val===e}function z(){return D()||U()||L("^")}function D(){var e=G();if(e.type===x){var r=e.val;return"."===r||".."===r}return!1}function U(){var e=G();return e.type===y&&"$"===e.val[0]}function F(e){var r=Z();r.type===x&&r.val===e||N(r)}function G(){if(null!==t)return t;var e=r;return t=R(),r=e,t}function R(){for(;t=e[r]," \r\n\t".indexOf(t)>-1;)++r;var t;if(r>=n)return{type:m,range:[r,r]};var o=function(){var t=r,n=e[r],o=e[r+1];if("."===n){if(_(o))return;return"."===e[++r]?{type:x,val:"..",range:[t,++r]}:{type:x,val:".",range:[t,r]}}if("="===o){var u=e[r+2];if("="===u){if("=!^$*".indexOf(n)>=0)return{type:x,val:n+o+u,range:[t,r+=3]}}else if("^$*".indexOf(u)>=0){if("="===n)return{type:x,val:n+o+u,range:[t,r+=3]}}else if("=!^$*><".indexOf(n)>=0)return{type:x,val:n+o,range:[t,r+=2]}}else if("="===n&&"^$*".indexOf(o)>=0)return{type:x,val:n+o,range:[t,r+=2]};if(n===o&&("|"===n||"&"===n))return{type:x,val:n+o,range:[t,r+=2]};if(":{}()[]^+-*/%!><|".indexOf(n)>=0)return{type:x,val:n,range:[t,++r]}}();if(o||(o=function(){var t=e[r];if(!B(t))return;var o=r,u=t;for(;++r<n&&J(t=e[r]);)u+=t;switch(u){case"true":case"false":return{type:w,val:"true"===u,range:[o,r]};case"null":return{type:b,val:null,range:[o,r]};default:return{type:y,val:u,range:[o,r]}}}())||(o=function(){if('"'!==e[r]&&"'"!==e[r])return;var t,o=e[r],u=++r,a="",i=!1;for(;r<n;){if("\\"===(t=e[r++]))t=e[r++];else if(('"'===t||"'"===t)&&t===o){i=!0;break}a+=t}if(i)return{type:d,val:a,range:[u,r]}}())||(o=function(){var t=r,o=e[r],u="."===o;if(u||_(o)){for(var a=o;++r<n;){if("."===(o=e[r])){if(u)return;u=!0}else if(!_(o))break;a+=o}return{type:g,val:u?parseFloat(a):parseInt(a,10),range:[t,r]}}}()))return o;o={range:[r,r]},r>=n?o.type=m:o.val=e[r],N(o)}function Z(){var e;return t?(r=t.range[1],e=t,t=null,e):R()}function _(e){return"0123456789".indexOf(e)>=0}function B(e){return"$"===e||"@"===e||"_"===e||e>="a"&&e<="z"||e>="A"&&e<="Z"}function J(e){return B(e)||e>="0"&&e<="9"}function N(e){e.type===m&&X(e,O),X(e,j,e.val)}function X(e,r){var t=Array.prototype.slice.call(arguments,2),n=r.replace(/%(\d)/g,(function(e,r){return t[r]||""})),o=new Error(n);throw o.column=e.range[0],o}return function(o){e=o.split(""),r=0,t=null,n=e.length;var u=A(),a=Z();return a.type!==m&&N(a),u}}(),g=function(){var e,r,t,n;function h(){if(n.length)return n.shift();var e="v"+ ++t;return r.push(e),e}function y(){for(var e=arguments,r=e.length;r--;)n.push(e[r])}function g(r,t,n){if(r.prop){var o=O(r.prop),u=h(),a=h(),i=h(),s=h(),f=h(),p=h(),c=h();e.push(u,"= [];",a,"= 0;",i,"=",n,".length;",c,"= [];","while(",a,"<",i,") {",s,"=",n,"[",a,"++];","if(",s,"!= null) {"),"*"===r.prop?(e.push("if(typeof ",s,'=== "object") {',"if(isArr(",s,")) {",u,"=",u,".concat(",s,");","}","else {","for(",f," in ",s,") {","if(",s,".hasOwnProperty(",f,")) {",p,"=",s,"[",f,"];"),A(u,p),e.push("}","}","}","}")):(e.push(p,"=",s,"[",o,"];"),A(u,p,c,i)),e.push("}","}",t,"=",i,"> 1 &&",c,".length?",c,".length > 1?","concat.apply(",u,",",c,") :",u,".concat(",c,"[0]) :",u,";"),y(u,a,i,s,f,p,c)}}function d(r,t,n){var o=r.prop,u=h(),a=h(),i=h(),s=h(),f=h(),p=h(),c=h(),l=h();e.push(u,"=",n,".slice(),",l,"= [];","while(",u,".length) {",a,"=",u,".shift();"),o?e.push("if(typeof ",a,'=== "object" &&',a,") {"):e.push("if(typeof ",a,"!= null) {"),e.push(i,"= [];","if(isArr(",a,")) {",s,"= 0,",c,"=",a,".length;","while(",s,"<",c,") {",p,"=",a,"[",s,"++];"),o&&e.push("if(typeof ",p,'=== "object") {'),A(i,p),o&&e.push("}"),e.push("}","}","else {"),o?"*"!==o&&(e.push(p,"=",a,'["'+o+'"];'),A(l,p)):(A(l,a),e.push("if(typeof ",a,'=== "object") {')),e.push("for(",f," in ",a,") {","if(",a,".hasOwnProperty(",f,")) {",p,"=",a,"[",f,"];"),A(i,p),"*"===o&&A(l,p),e.push("}","}"),o||e.push("}"),e.push("}",i,".length &&",u,".unshift.apply(",u,",",i,");","}","}",t,"=",l,";"),y(u,a,i,s,f,p,c,l)}function w(r,t,n){var o=h(),u=h(),a=h(),i=h(),s=h();e.push(o,"= [];",u,"= 0;",a,"=",n,".length;","while(",u,"<",a,") {",s,"=",n,"[",u,"++];"),x(r.arg,i,s),e.push(I(r.arg,i),"&&",o,".push(",s,");","}",t,"=",o,";"),y(o,u,a,s,i)}function b(r,t,n){var o,u,a=r.arg;if(a.idx){var i=h();return x(a.idx,i,n),e.push(i,"< 0 && (",i,"=",n,".length +",i,");",t,"=",n,"[",i,"] == null? [] : [",n,"[",i,"]];"),y(i),!1}a.fromIdx?a.toIdx?(x(a.fromIdx,o=h(),n),x(a.toIdx,u=h(),n),e.push(t,"=",n,".slice(",o,",",u,");"),y(o,u)):(x(a.fromIdx,o=h(),n),e.push(t,"=",n,".slice(",o,");"),y(o)):(x(a.toIdx,u=h(),n),e.push(t,"=",n,".slice(0,",u,");"),y(u))}function x(r,t,n){switch(r.type){case o:!function(r,t,n){var o=r.parts,s=0,f=o.length;for(e.push(t,"=",r.fromRoot?"data":r.subst?"subst."+r.subst:n,";","isArr("+t+") || ("+t+" = ["+t+"]);");s<f;){var p=o[s++];switch(p.type){case u:".."===p.selector?d(p,t,t):g(p,t,t);break;case a:w(p,t,t);break;case i:b(p,t,t);break;case c:j(p,t,t)}}}(r,t,n);break;case c:j(r,t,n);break;case f:!function(r,t,n){var u=h(),a=h(),i=h(),s=h(),f=h(),p=h(),c=h(),l=h(),g=r.args[0],d=r.args[1];e.push(t,"= false;"),x(g,u,n),x(d,a,n);var w=g.type===o,b=d.type===v;e.push(i,"="),w?e.push("true;"):e.push("isArr(",u,");"),e.push(s,"="),b?e.push("false;"):e.push("isArr(",a,");"),e.push("if("),w||e.push(i,"&&"),e.push(u,".length === 1) {",u,"=",u,"[0];",i,"= false;","}"),b||e.push("if(",s,"&&",a,".length === 1) {",a,"=",a,"[0];",s,"= false;","}"),e.push(f,"= 0;","if(",i,") {",c,"=",u,".length;"),b||(e.push("if(",s,") {",l,"=",a,".length;","while(",f,"<",c,"&& !",t,") {",p,"= 0;","while(",p,"<",l,") {"),m(r.op,[u,"[",f,"]"].join(""),[a,"[",p,"]"].join("")),e.push(t,"= true;","break;","}","++",p,";","}","++",f,";","}","}","else {"));e.push("while(",f,"<",c,") {"),m(r.op,[u,"[",f,"]"].join(""),a),e.push(t,"= true;","break;","}","++",f,";","}"),b||e.push("}"),e.push("}"),b||(e.push("else if(",s,") {",l,"=",a,".length;","while(",f,"<",l,") {"),m(r.op,u,[a,"[",f,"]"].join("")),e.push(t,"= true;","break;","}","++",f,";","}","}"));e.push("else {",t,"=",T[r.op](u,a),";","}"),y(u,a,i,s,f,p,c,l)}(r,t,n);break;case p:!function(r,t,n){var o=h(),u=h(),a=r.args;x(a[0],o,n),x(a[1],u,n),e.push(t,"=",T[r.op]($(a[0],o),$(a[1],u)),";"),y(o,u)}(r,t,n);break;case s:!function(r,t,n){var o,u=[],a=r.args,i=a.length,s=0;switch(e.push(t,"= false;"),r.op){case"&&":for(;s<i;)u.push(o=h()),x(a[s],o,n),e.push("if(",I(a[s++],o),") {");e.push(t,"= true;");break;case"||":for(;s<i;)u.push(o=h()),x(a[s],o,n),e.push("if(",I(a[s],o),") {",t,"= true;","}"),1+s++<i&&e.push("else {");--i}for(;i--;)e.push("}");y.apply(null,u)}(r,t,n);break;case l:!function(r,t,n){var o=h(),u=r.arg;switch(x(u,o,n),r.op){case"!":e.push(t,"= !",I(u,o)+";");break;case"-":e.push(t,"= -",$(u,o)+";")}y(o)}(r,t,n);break;case v:e.push(t,"="),A=r.val,e.push("string"==typeof A?O(A):null===A?"null":A),e.push(";")}var A}function m(r,t,n){e.push("if(",T[r](t,n),") {")}function j(r,t,n){for(var o=[],u=r.args,a=u.length,i=0;i<a;)o.push(h()),x(u[i],o[i++],n);e.push(t,"= concat.call(",o.join(","),");"),y.apply(null,o)}function O(e){return"'"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"}function A(r,t,n,o){e.push("if(typeof ",t,'!== "undefined") {',"if(isArr(",t,")) {"),n&&(e.push(o,"> 1?"),k(n,t),e.push(":")),e.push(r,"=",r,".length?",r,".concat(",t,") :",t,".slice()",";","}","else {"),n&&e.push("if(",n,".length) {",r,"= concat.apply(",r,",",n,");",n,"= [];","}"),k(r,t),e.push(";","}","}")}function k(r,t){e.push(r,".length?",r,".push(",t,") :",r,"[0] =",t)}function I(e,r){switch(e.type){case s:return r;case v:return"!!"+r;case o:return r+".length > 0";default:return["(typeof ",r,'=== "boolean"?',r,":","isArr(",r,")?",r,".length > 0 : !!",r,")"].join("")}}function $(e,r){switch(e.type){case v:return r;case o:return r+"[0]";default:return["(isArr(",r,")?",r,"[0] : ",r,")"].join("")}}function P(e,r){return["typeof ",e,'=== "string" && typeof ',r,'=== "string" &&',e,".indexOf(",r,") === 0"].join("")}function S(e,r){return[e,"!= null &&",r,"!= null &&",e,".toString().toLowerCase().indexOf(",r,".toString().toLowerCase()) === 0"].join("")}function C(e,r){return["typeof ",e,'=== "string" && typeof ',r,'=== "string" &&',e,".length >=",r,".length &&",e,".lastIndexOf(",r,") ===",e,".length -",r,".length"].join("")}function M(e,r){return[e,"!= null &&",r,"!= null &&","(",e,"=",e,".toString()).length >=","(",r,"=",r,".toString()).length &&","(",e,".toLowerCase()).lastIndexOf(","(",r,".toLowerCase())) ===",e,".length -",r,".length"].join("")}function E(e,r){return["typeof ",e,'=== "string" && typeof ',r,'=== "string" &&',e,".indexOf(",r,") > -1"].join("")}function W(e,r){return[e,"!= null && ",r,"!= null &&",e,".toString().toLowerCase().indexOf(",r,".toString().toLowerCase()) > -1"].join("")}var T={"===":function(e,r){return e+"==="+r},"==":function(e,r){return["typeof ",e,'=== "string" && typeof ',r,'=== "string"?',e,".toLowerCase() ===",r,".toLowerCase() :"+e,"==",r].join("")},">=":function(e,r){return e+">="+r},">":function(e,r){return e+">"+r},"<=":function(e,r){return e+"<="+r},"<":function(e,r){return e+"<"+r},"!==":function(e,r){return e+"!=="+r},"!=":function(e,r){return e+"!="+r},"^==":P,"==^":function(e,r){return P(r,e)},"^=":S,"=^":function(e,r){return S(r,e)},"$==":C,"==$":function(e,r){return C(r,e)},"$=":M,"=$":function(e,r){return M(r,e)},"*==":E,"==*":function(e,r){return E(r,e)},"=*":function(e,r){return W(r,e)},"*=":W,"+":function(e,r){return e+"+"+r},"-":function(e,r){return e+"-"+r},"*":function(e,r){return e+"*"+r},"/":function(e,r){return e+"/"+r},"%":function(e,r){return e+"%"+r}};return function(u){if(e=[],r=["res"],t=0,n=[],x(u,"res","data"),e.unshift("var ",Array.isArray?"isArr = Array.isArray":'toStr = Object.prototype.toString, isArr = function(o) { return toStr.call(o) === "[object Array]"; }',", concat = Array.prototype.concat",",",r.join(","),";"),u.type===o){var a=u.parts[u.parts.length-1];a&&a.type===i&&"idx"in a.arg&&e.push("res = res[0];")}return e.push("return res;"),e.join("")}}();function d(e){return Function("data,subst",g(y(e)))}var w={},b=[],x={cacheSize:100},m={cacheSize:function(e,r){if(r<e&&b.length>r)for(var t=b.splice(0,b.length-r),n=t.length;n--;)delete w[t[n]]}},j=function(e,r,t){return w[e]||(w[e]=d(e),b.push(e)>x.cacheSize&&delete w[b.shift()]),w[e](r,t||{})};j.version="0.3.4",j.params=function(e){if(!arguments.length)return x;for(var r in e)e.hasOwnProperty(r)&&(m[r]&&m[r](x[r],e[r]),x[r]=e[r])},j.compile=d,j.apply=j,"object"==typeof e.exports?e.exports=j:"object"==typeof modules?modules.define("jspath",(function(e){e(j)})):(n=function(e,r,t){t.exports=j}.call(r,t,r,e),void 0===n||(e.exports=n))}()}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var u=r[n]={exports:{}};return e[n](u,u.exports,t),u.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{"use strict";var e=t(915),r=t.n(e);function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){u(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,r,t){s(e,r),r.set(e,t)}function s(e,r){if(r.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(e,r,t){if(!r.has(e))throw new TypeError("attempted to get private field on non-instance");return t}function p(e,r){return function(e,r){if(r.get)return r.get.call(e);return r.value}(e,l(e,r,"get"))}function c(e,r,t){return function(e,r,t){if(r.set)r.set.call(e,t);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=t}}(e,l(e,r,"set"),t),t}function l(e,r,t){if(!r.has(e))throw new TypeError("attempted to "+t+" private field on non-instance");return r.get(e)}var h=new WeakMap,v=new WeakMap,y=new WeakMap,g=new WeakSet,d=function(){function e(r){var t,n;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),s(t=this,n=g),n.add(t),i(this,h,{writable:!0,value:""}),i(this,v,{writable:!0,value:"AMIXmlToJson.xsl"}),i(this,y,{writable:!0,value:new RegExp("-\\W*([a-zA-Z][a-zA-Z0-9]*)\\W*=\\W*\\?","g")}),c(this,h,r)}var t,n,u;return t=e,(n=[{key:"execute",value:function(e,t){t=t||{};var n=$.Deferred(),u=(t.endpoint||p(this,h)).trim(),a=(t.converter||p(this,v)).trim(),i=t.extras||{},s=t.params||[],f=t.context||n,c=t.timeout||12e4;e=(e||"").trim().replace(p(this,y),(function(e,r){return"-".concat(r,'="').concat(String(s.shift()).replace("\\","\\\\").replace("\n","\\n").replace('"','\\"').replace("'","\\'"),'"')}));var l=o(o({},i),{},{Command:e,Converter:a}),g=u,d=u+"?"+$.param(l);return"AMIXmlToJson.xsl"===a?$.ajax({url:g,data:l,type:"POST",timeout:c,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){var t=r().apply(".AMIMessage.info.$",e),o=r().apply(".AMIMessage.error.$",e);0===o.length?n.resolveWith(f,[e,t.join(". "),d]):n.rejectWith(f,[e,o.join(". "),d])},error:function(e,r){"error"===r&&(r="service temporarily unreachable"),"parsererror"===r&&(r="resource temporarily unreachable");var t={AMIMessage:[{error:[{$:r}]}]};n.rejectWith(f,[t,r,d])}}):$.ajax({url:g,data:l,type:"POST",timeout:c,dataType:"text",xhrFields:{withCredentials:!0},success:function(e){n.resolveWith(f,[e,e,d])},error:function(e,r){"error"===r&&(r="service temporarily unreachable"),n.rejectWith(f,[r,r,d])}}),n.promise()}},{key:"signInByPassword",value:function(e,r,t){return f(this,g,w).call(this,this.execute("GetSessionInfo -AMIUser=? -AMIPass=?",{extras:{NoCert:null},params:[e,r]}),t)}},{key:"signInByCertificate",value:function(e){return f(this,g,w).call(this,this.execute("GetSessionInfo",{extras:{},params:[]}),e)}},{key:"signOut",value:function(e){return f(this,g,w).call(this,this.execute("GetSessionInfo -AMIUser=? -AMIPass=?",{extras:{NoCert:null},params:["",""]}),e)}},{key:"jspath",value:function(e,t){return r().apply(e,t)}}])&&a(t.prototype,n),u&&a(t,u),e}();function w(e,t){t=t||{};var n=$.Deferred(),o=t.context||n;return e.then((function(e,t){var u={},a={},i={},s={},f={};r().apply('..rowset{.@type==="user"}.row.field',e).forEach((function(e){u[e["@name"]]=e.$})),r().apply('..rowset{.@type==="udp"}.row.field',e).forEach((function(e){s[e["@name"]]=e.$})),r().apply('..rowset{.@type==="sso"}.row.field',e).forEach((function(e){f[e["@name"]]=e.$})),r().apply('..rowset{.@type==="role"}.row',e).forEach((function(e){var r="",t={};e.field.forEach((function(e){t[e["@name"]]=e.$,"name"===e["@name"]&&(r=e.$)})),a[r]=t})),r().apply('..rowset{.@type==="bookmark"}.row',e).forEach((function(e){var r="",t={};e.field.forEach((function(e){t[e["@name"]]=e.$,"hash"===e["@name"]&&(r=e.$)})),i[r]=t})),n.resolveWith(o,[e,t,u,a,i,s,f])}),(function(e,r){n.rejectWith(o,[e,r,{AMIUser:"guest",guestUser:"guest"},{},{},{},{}])})),n.promise()}"undefined"!=typeof window&&(window.AMIHTTPClient=d)})()})();